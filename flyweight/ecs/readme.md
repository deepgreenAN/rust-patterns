# ECSで擬似的なフライウェイトパターン

- ECSは以下の特徴がある．
  - データオブジェクト(Rustの場合は普通の構造体や列挙体)(ECSではコンポーネントと呼ばれる)をストレージが保有・一元的に管理する．
  - コンポーネントの取得はエンティティと呼ばれるIDかストレージに対するクエリによって行う．これはある意味内部可変性を用いた実装と似ているが，ECSではどのコンポーネント(構造体)でも同一のストレージが保持できる．
  - データはメモリに連続して配置され，メモリサイズやキャッシュが効率的になる
  - ふるまいはシステムと呼ばれる関数が担当し、コンポーネントをバッチ処理して並列化・最適化を行うことができる．
- このECSを用いれば、Rustでは再現しにくいアーキテクチャを実現できる．Flyweightパターンも，内因的状態をエンティティとして外因的状態のコンポーネントが保有することで実現できる．
- ECSを用いてOOPのアーキテクチャを実現することは困難だが，内因的状態の共有やメモリの効率化は実現できる．
- ここではbevy_ecsクレートを用いた．
